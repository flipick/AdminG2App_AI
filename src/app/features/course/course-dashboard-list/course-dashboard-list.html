<div class="card">
    <!-- Header -->
    <div class="flex items-center mb-4">
        <h2 class="text-lg font-semibold text-gray-800">Course Details</h2>

        <div class="flex items-center ml-auto">
            <!-- Search -->
            <input type="text" [(ngModel)]="searchText" (input)="onSearch()" placeholder="Search courses..."
                class="form-input" />
        </div>
    </div>

    <!-- Table -->
    <div class="-mx-4">
        <div class="overflow-x-auto">
            <table class="w-full border-collapse table-fixed">
                <thead>
                    <tr class="bg-primary-200 text-left text-sm text-gray-700 border-b border-primary-300/80">
                        <th class="p-4 cursor-pointer" (click)="sortTable('courseName')">
                            <div class="flex items-center gap-2">
                                <span>Course Name</span>
                                <span [innerHTML]="getSortArrow('courseName')"></span>
                            </div>
                        </th>
                        <th class="p-4 cursor-pointer w-40" (click)="sortTable('categoryName')">
                            <div class="flex items-center gap-2">
                                <span>Category</span>
                                <span [innerHTML]="getSortArrow('categoryName')"></span>
                            </div>
                        </th>
                        <th class="p-4 cursor-pointer w-40" (click)="sortTable('percentage')">
                            <div class="flex items-center gap-2">
                                <span>Completion</span>
                                <span [innerHTML]="getSortArrow('percentage')"></span>
                            </div>
                        </th>
                        <th class="p-4 cursor-pointer w-40" (click)="sortTable('duration')">
                            <div class="flex items-center gap-2">
                                <span>Duration</span>
                                <span [innerHTML]="getSortArrow('duration')"></span>
                            </div>
                        </th>
                        <th class="p-4 cursor-pointer w-30" (click)="sortTable('status')">
                            <div class="flex items-center gap-2">
                                <span>Status</span>
                                <span [innerHTML]="getSortArrow('status')"></span>
                            </div>
                        </th>

                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let course of filteredCourses; let i = index" class="border-b  border-primary-300/80 text-sm hover:bg-primary-100">
                        <td class="p-4 font-medium text-gray-950">{{ course.courseName }}</td>
                        <td class="p-4">{{ course.categoryName }}</td>
                        <td class="p-4">{{ course.percentage }}%</td>
                        <td class="p-4">{{ course.duration }}</td>
                        <td class="p-4">
                            <span  [ngClass]="{
                    'btn-secondary text-gray-950': (!course.status || course.status.trim() === '' || course.status.toLowerCase() === 'draft'),
                    'btn-primary': (course.status && course.status.trim() !== '' && course.status.toLowerCase() !== 'draft')
                }">
                                {{ (!course.status || course.status.trim() === '') ? 'Draft' : course.status }}
                            </span>
                        </td>
                    </tr>
                    <tr *ngIf="filteredCourses.length === 0">
                        <td colspan="5" class="p-4 text-center text-gray-400">No courses found.</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Pagination -->
    <div class="flex justify-between items-center mt-4 text-sm text-gray-600">
        <p>Showing {{ startIndex + 1 }} - {{ endIndex }} of {{ totalItems }} courses</p>
        <div class="flex space-x-2">
            <button (click)="prevPage()" [disabled]="pageIndex === 0"
                class="btn-outline disabled:opacity-50 disabled:cursor-not-allowed">Prev</button>
            <button (click)="nextPage()" [disabled]="(pageIndex + 1) * pageSize >= totalItems"
                class="btn-outline disabled:opacity-50 disabled:cursor-not-allowed">Next</button>
        </div>
    </div>
</div>